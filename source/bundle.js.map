{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/components/AbstractComponent.js","webpack:///./src/components/button-more.js","webpack:///./src/components/card.js","webpack:///./src/components/category.js","webpack:///./src/components/consts.js","webpack:///./src/components/utils.js","webpack:///./src/load/load.js","webpack:///./src/main.js"],"names":[],"mappings":"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","file":"bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./src/main.js\");\n","import {createElement} from \"./utils\";\n\nclass AbstractComponent {\n  constructor() {\n    if (new.target === AbstractComponent) {\n      throw new Error(`Can't instantiate AbstractComponent, only concrete one.`);\n    }\n\n    this._element = null;\n  }\n\n  getTemplate() {\n    throw new Error(`Abstract method not implemented: getTemplate`);\n  }\n\n  getElement() {\n    if (!this._element) {\n      this._element = createElement(this.getTemplate());\n    }\n\n    return this._element;\n  }\n\n  removeElement() {\n    this._element = null;\n  }\n}\n\nexport default AbstractComponent;\n","import {createElement} from \"./utils\";\n\nconst createButtonMore = () => `<button class=\"store-content__btn-more\" type=\"button\">Показать еще</button>`;\n\nclass ButtonMore {\n  constructor() {\n    this._element = null;\n  }\n\n  getTemplate() {\n\n    return createButtonMore();\n  }\n\n  getElement() {\n    if (!this._element) {\n      this._element = createElement(this.getTemplate());\n    }\n\n    return this._element;\n  }\n\n  removeElement() {\n    this._element = null;\n  }\n}\n\nexport default ButtonMore;\n","import {regexp} from \"./utils\";\nimport AbstractComponent from \"./AbstractComponent\";\n\nconst createCard = (card) => {\n  const {title, price, sale, image, id, material} = card;\n\n  const getTitle = () => {\n    return title.match(regexp).join(``);\n  };\n\n  return (\n    `<li class=\"cards__item\">\n        <a class=\"cards__link\" href=\"card.html?${id}\">\n            <img src=${image} width=\"213\" height=\"213\" alt=\"Название товара\">\n        </a>\n        <h3 class=\"cards__title\">${getTitle()}</h3>\n        <p class=\"cards__material\">${material}</p>\n        <div class=\"cards__prices\">\n            <p class=\"cards__price\">${sale} ₽</p>\n            <p class=\"cards__price cards__price--sale\">${price} ₽</p>\n        </div>\n        <div class=\"cards__sale-value\">-10%</div>\n    </li>`\n  );\n};\n\nclass Card extends AbstractComponent {\n  constructor(card) {\n    super();\n\n    this._card = card;\n  }\n\n  getTemplate() {\n    return createCard(this._card);\n  }\n}\n\nexport default Card;\n","import {createElement} from \"./utils\";\n\nconst createCategory = (category) => {\n  const {title, id} = category;\n\n  return (\n    `<li class=\"sort__item\">\n       <a class=\"sort__link\" href=\"\" id=\"${id}\">${title}</a>\n     </li>`\n  );\n};\n\nexport default class Category {\n  constructor(category) {\n    this._category = category;\n    this._element = null;\n  }\n\n  getTemplate() {\n    return createCategory(this._category);\n  }\n\n  getElement() {\n    if (!this._element) {\n      this._element = createElement(this.getTemplate());\n    }\n\n    return this._element;\n  }\n\n  removeElement() {\n    this._element = null;\n  }\n}\n","export const START_SHOW_TASK = 9;\nexport const MORE_SHOW_TASK = 6;\n\nexport const Place = {\n  AFTERBEGIN: `afterbegin`,\n  BEFOREEND: `beforeend`\n};\n","import {Place} from \"./consts\";\n\nexport const cleanContainer = (container) => {\n  container.innerHTML = ``;\n};\n\nexport const render = (container, element, place) => {\n  switch (place) {\n    case Place.AFTERBEGIN:\n      container.prepend(element);\n      break;\n    case Place.BEFOREEND:\n      container.append(element);\n      break;\n    case Place.AFTERNODE:\n      container.after(element);\n      break;\n  }\n};\n\nexport const createElement = (template) => {\n  const newElement = document.createElement(`div`);\n  newElement.innerHTML = template;\n\n  return newElement.firstChild;\n};\n\nexport const regexp = /[а-я А-Я \\d ( )]/iug;\n","import {cleanContainer, render} from \"../components/utils\";\nimport {START_SHOW_TASK, MORE_SHOW_TASK, Place} from \"../components/consts\";\nimport CardComponent from \"../components/card\";\nimport CategoryComponent from \"../components/category\";\nimport ButtonMoreComponent from \"../components/button-more\";\n\nconst Url = {\n  offers: `./data/decor.json`,\n  category: `./data/category.json`\n};\n\nconst STATUS_OK = 200;\nconst cardBox = document.querySelector(`.cards`);\nconst buttonMoreBox = document.querySelector(`.store-content__more-box`);\nconst loadMoreButton = document.querySelector(`.store-content__btn-more`);\nconst categoryList = document.querySelector(`.sort__list--category`);\nconst allCategoryBtn = document.querySelector(`.sort__link--category`);\nlet offers = [];\nlet categories = [];\nlet isSort = null;\n\nconst load = (onload, url) => {\n  const xhr = new XMLHttpRequest();\n  xhr.responseType = `json`;\n\n  xhr.addEventListener(`load`, () => {\n    if (xhr.status === STATUS_OK) {\n      onload(xhr.response);\n    }\n  });\n\n  xhr.open(`GET`, url);\n  xhr.send();\n};\n\nconst getImage = (img) => {\n  if (typeof (img) === `string`) {\n    return img;\n  } else {\n    if (!img[0].endsWith(`jpg`)) {\n      return img[1];\n    }\n    return img[0];\n  }\n};\n\nconst getOffers = (data) => {\n  return data.reduce((cardList, card) => {\n    const product = {\n      title: card.name,\n      price: card.price,\n      sale: card.wholesalePrice,\n      image: getImage(card.picture),\n      categoryId: card.categoryId,\n      id: card.id,\n      material: card.material\n    };\n    cardList.push(product);\n    return cardList;\n  }, []);\n};\n\nconst renderCards = (container, cards) => {\n  cards.splice(0, START_SHOW_TASK)\n    .forEach((card) => {\n      renderCard(cardBox, card);\n    });\n\n  const onMoreView = (evt) => {\n    cards.splice(0, MORE_SHOW_TASK)\n      .forEach((card) => renderCard(cardBox, card));\n\n    if (cards.length === 0) {\n      evt.target.remove();\n    }\n  };\n\n  if (isSort) {\n    const buttonMoreComponent = new ButtonMoreComponent();\n\n    render(buttonMoreBox, buttonMoreComponent.getElement(), Place.BEFOREEND);\n\n    buttonMoreComponent.getElement().addEventListener(`click`, onMoreView);\n  } else {\n    loadMoreButton.addEventListener(`click`, onMoreView);\n  }\n};\n\nconst renderCard = (container, card) => {\n  const cardComponent = new CardComponent(card);\n\n  render(container, cardComponent.getElement(card), Place.BEFOREEND);\n};\n\nconst renderCategory = (container, category) => {\n  const categoryComponent = new CategoryComponent(category);\n\n  const someCategory = categories.filter((it) => {\n    return it.parentId === category.id;\n  }).reduce((catList, cat) => {\n    catList.push(cat.id);\n    return catList;\n  }, []);\n\n  // сравнение двух массивов\n  const getTrue = (card) => card.categoryId.some((n) => someCategory.includes(n));\n\n  categoryComponent.getElement().addEventListener(`click`, (evt) => {\n    evt.preventDefault();\n\n    const categoryButtons = categoryList.querySelectorAll(`.sort__link`);\n\n    categoryButtons.forEach((link) => {\n      link.classList.remove(`sort__link--active`);\n    });\n\n    evt.target.classList.add(`sort__link--active`);\n\n    const someCards = offers.filter((card) => {\n      if (typeof card.categoryId === `string`) {\n        return card.categoryId === category.id;\n      } else {\n        return getTrue(card);\n      }\n    });\n\n    cleanContainer(cardBox);\n\n    const btnMore = document.querySelector(`.store-content__btn-more`);\n\n    if (btnMore) {\n      btnMore.remove();\n    }\n\n    isSort = true;\n\n    renderCards(cardBox, someCards);\n  });\n\n  render(container, categoryComponent.getElement(category), Place.BEFOREEND);\n};\n\nconst loadCard = (data) => {\n\n  offers = getOffers(data);\n  const offersCopy = offers.slice();\n\n  renderCards(cardBox, offersCopy);\n};\n\nconst getParentId = (id) => id ? id : ``;\n\nconst getCategory = (data) => {\n  return data.reduce((categoriesList, card) => {\n    const category = {\n      title: card.title,\n      id: card.id,\n      parentId: getParentId(card.parentId)\n    };\n    categoriesList.push(category);\n    return categoriesList;\n  }, []);\n};\n\nconst loadCategory = (data) => {\n  categories = getCategory(data);\n  const someCategory = categories.filter((it) => {\n    return it.parentId === ``;\n  });\n\n  someCategory.forEach((category) => renderCategory(categoryList, category));\n};\n\nexport {load, loadCard, loadCategory, Url};\n\nallCategoryBtn.addEventListener(`click`, (evt) => {\n  evt.preventDefault();\n  const copyOffers = offers.slice();\n  const categoryButtons = categoryList.querySelectorAll(`.sort__link`);\n\n  categoryButtons.forEach((link) => {\n    link.classList.remove(`sort__link--active`);\n  });\n\n  if (isSort) {\n    cleanContainer(cardBox);\n\n    const btnMore = document.querySelector(`.store-content__btn-more`);\n\n    if (btnMore) {\n      btnMore.remove();\n    }\n\n    renderCards(cardBox, copyOffers);\n\n    isSort = null;\n  }\n\n});\n","import {load, loadCard, loadCategory, Url} from \"./load/load\";\n\nload(loadCard, Url.offers);\nload(loadCategory, Url.category);\n"],"sourceRoot":""}